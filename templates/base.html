{% load static %}
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- Tag Meta SEO -->
    <title>{% block title %}{{ site_settings.site_name|default:"Program Studi Teknik Informatika" }}{% endblock %}</title>
    <meta name="description" content="{% block meta_description %}{{ site_settings.site_tagline|default:"Website resmi Program Studi Teknik Informatika" }}{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}teknik informatika, program studi, pendidikan, universitas{% endblock %}">
    <meta name="author" content="{{ site_settings.university_name|default:"Universitas" }}">
    
    <!-- Tag Meta Open Graph -->
    <meta property="og:title" content="{% block og_title %}{{ site_settings.site_name }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ site_settings.site_tagline }}{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri }}">
    
    <!-- Ikon Situs -->
    {% if site_settings.favicon %}
    <link rel="icon" href="{{ site_settings.favicon.url }}" type="image/x-icon">
    {% else %}
    <link rel="icon" href="{% static 'images/favicon.ico' %}" type="image/x-icon">
    {% endif %}
    
    <!-- CSS Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Ikon Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    
    <!-- Font Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Animasi AOS -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    
    <!-- CSS Kustom -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    <style>
    /* Header Particles Animation - Global */
    .header-particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        pointer-events: none;
    }

    .header-particles span {
        position: absolute;
        width: 20px;
        height: 20px;
        background: rgba(255,255,255,0.1);
        border-radius: 50%;
        animation: header-particle-float 15s infinite;
    }

    .header-particles span:nth-child(1) { left: 10%; top: 20%; animation-delay: 0s; width: 15px; height: 15px; }
    .header-particles span:nth-child(2) { left: 20%; top: 60%; animation-delay: -2s; width: 25px; height: 25px; }
    .header-particles span:nth-child(3) { left: 40%; top: 40%; animation-delay: -4s; width: 10px; height: 10px; }
    .header-particles span:nth-child(4) { left: 60%; top: 70%; animation-delay: -6s; width: 20px; height: 20px; }
    .header-particles span:nth-child(5) { left: 80%; top: 30%; animation-delay: -8s; width: 30px; height: 30px; }
    .header-particles span:nth-child(6) { left: 90%; top: 80%; animation-delay: -10s; width: 12px; height: 12px; }

    @keyframes header-particle-float {
        0%, 100% {
            transform: translateY(0) rotate(0deg);
            opacity: 0.3;
        }
        50% {
            transform: translateY(-30px) rotate(180deg);
            opacity: 0.6;
        }
    }

    .floating-shape {
        position: absolute;
        border-radius: 50%;
        opacity: 0.1;
        animation: float-shape 15s ease-in-out infinite;
    }

    .shape-1 {
        width: 300px;
        height: 300px;
        background: linear-gradient(135deg, #fff 0%, transparent 100%);
        top: -100px;
        right: -50px;
        animation-delay: 0s;
    }

    .shape-2 {
        width: 200px;
        height: 200px;
        background: linear-gradient(135deg, #fff 0%, transparent 100%);
        bottom: -50px;
        left: 10%;
        animation-delay: -5s;
    }

    .shape-3 {
        width: 150px;
        height: 150px;
        background: linear-gradient(135deg, #fff 0%, transparent 100%);
        top: 30%;
        left: 5%;
        animation-delay: -10s;
    }

    @keyframes float-shape {
        0%, 100% { transform: translateY(0) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(10deg); }
    }
    </style>
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Pemuat Awal -->
    <div id="preloader">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>
    
    <!-- Bilah Atas -->
    <div class="top-bar d-none d-lg-block">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <ul class="top-info list-inline mb-0">
                        <li class="list-inline-item">
                            <i class="bi bi-envelope me-1"></i>
                            <a href="mailto:{{ site_settings.email|default:'pti@ums.ac.id' }}">
                                {{ site_settings.email|default:'pti@ums.ac.id' }}
                            </a>
                        </li>
                        <li class="list-inline-item">
                            <i class="bi bi-telephone me-1"></i>
                            <a href="tel:{{ site_settings.phone|default:'0271717417' }}">
                                {{ site_settings.phone|default:'(0271) 717417' }}
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="col-md-4 text-end">
                    <ul class="social-links list-inline mb-0">
                        {% if site_settings.instagram %}
                        <li class="list-inline-item">
                            <a href="{{ site_settings.instagram }}" target="_blank" aria-label="Instagram">
                                <i class="bi bi-instagram"></i>
                            </a>
                        </li>
                        {% endif %}
                        {% if site_settings.youtube %}
                        <li class="list-inline-item">
                            <a href="{{ site_settings.youtube }}" target="_blank" aria-label="YouTube">
                                <i class="bi bi-youtube"></i>
                            </a>
                        </li>
                        {% endif %}
                        {% if site_settings.twitter %}
                        <li class="list-inline-item">
                            <a href="{{ site_settings.twitter }}" target="_blank" aria-label="Twitter">
                                <i class="bi bi-twitter-x"></i>
                            </a>
                        </li>
                        {% endif %}
                        {% if site_settings.tiktok %}
                        <li class="list-inline-item">
                            <a href="{{ site_settings.tiktok }}" target="_blank" aria-label="TikTok">
                                <i class="bi bi-tiktok"></i>
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Navigasi -->
    <nav class="navbar navbar-expand-lg navbar-light sticky-top" id="mainNav">
        <div class="container">
            <a class="navbar-brand" href="{% url 'main:home' %}">
                {% if site_settings.logo %}
                <img src="{{ site_settings.logo.url }}" alt="{{ site_settings.site_name }}" height="50">
                {% else %}
                <span class="brand-text">
                    <strong>PTI</strong> <span class="text-primary">UMS</span>
                </span>
                {% endif %}
            </a>
            
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'home' %}active{% endif %}" href="{% url 'main:home' %}">
                            <i class="bi bi-house-door me-1"></i> Beranda
                        </a>
                    </li>
                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
                            <i class="bi bi-info-circle me-1"></i> Tentang
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'main:tentang_kami' %}">Tentang Kami</a></li>
                            <li><a class="dropdown-item" href="{% url 'main:visi_misi' %}">Visi & Misi</a></li>
                            <li><a class="dropdown-item" href="{% url 'akademik:dosen_list' %}">Staff Pengajar</a></li>
                            <li><a class="dropdown-item" href="{% url 'akademik:fasilitas' %}">Fasilitas</a></li>
                        </ul>
                    </li>
                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
                            <i class="bi bi-mortarboard me-1"></i> Akademik
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="{% url 'akademik:kurikulum' %}">Kurikulum</a></li>
                            <li><a class="dropdown-item" href="{% url 'akademik:jadwal' %}">Jadwal Kuliah</a></li>
                            <li><a class="dropdown-item" href="{% url 'akademik:riset_grup' %}">Riset Grup</a></li>
                            <li><a class="dropdown-item" href="{% url 'akademik:publikasi' %}">Publikasi</a></li>
                        </ul>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link {% if 'berita' in request.path %}active{% endif %}" href="{% url 'berita:list' %}">
                            <i class="bi bi-newspaper me-1"></i> Berita
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link {% if 'prestasi' in request.path %}active{% endif %}" href="{% url 'prestasi:list' %}">
                            <i class="bi bi-trophy me-1"></i> Prestasi
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link {% if 'karya' in request.path %}active{% endif %}" href="{% url 'karya:list' %}">
                            <i class="bi bi-rocket me-1"></i> Karya
                        </a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link {% if request.resolver_match.url_name == 'kontak' %}active{% endif %}" href="{% url 'main:kontak' %}">
                            <i class="bi bi-envelope me-1"></i> Kontak
                        </a>
                    </li>
                </ul>
                
                <!-- Tombol Pencarian -->
                <button class="btn btn-outline-primary ms-lg-3" type="button" data-bs-toggle="modal" data-bs-target="#searchModal">
                    <i class="bi bi-search"></i>
                </button>
            </div>
        </div>
    </nav>
    
    <!-- Konten Utama -->
    <main>
        {% if messages %}
        <div class="container mt-3">
            {% for message in messages %}
            <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        {% block content %}{% endblock %}
    </main>
    
    <!-- Kaki Halaman -->
    <footer class="footer">
        <div class="footer-top">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 col-md-6 mb-4 mb-lg-0">
                        <div class="footer-widget">
                            <h5 class="footer-title">
                                {% if site_settings.logo %}
                                <img src="{{ site_settings.logo.url }}" alt="" height="40" class="mb-2">
                                {% endif %}
                                {{ site_settings.site_name|default:"Program Studi Teknik Informatika" }}
                            </h5>
                            <p class="text-muted">
                                {{ site_settings.site_tagline|default:"Membangun Generasi Digital Indonesia" }}
                            </p>
                            <div class="footer-social">
                                {% if site_settings.instagram %}
                                <a href="{{ site_settings.instagram }}" target="_blank"><i class="bi bi-instagram"></i></a>
                                {% endif %}
                                {% if site_settings.youtube %}
                                <a href="{{ site_settings.youtube }}" target="_blank"><i class="bi bi-youtube"></i></a>
                                {% endif %}
                                {% if site_settings.twitter %}
                                <a href="{{ site_settings.twitter }}" target="_blank"><i class="bi bi-twitter-x"></i></a>
                                {% endif %}
                                {% if site_settings.tiktok %}
                                <a href="{{ site_settings.tiktok }}" target="_blank"><i class="bi bi-tiktok"></i></a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-2 col-md-6 mb-4 mb-lg-0">
                        <div class="footer-widget">
                            <h6 class="footer-title">Menu</h6>
                            <ul class="footer-links">
                                <li><a href="{% url 'main:home' %}">Beranda</a></li>
                                <li><a href="{% url 'main:tentang_kami' %}">Tentang Kami</a></li>
                                <li><a href="{% url 'berita:list' %}">Berita</a></li>
                                <li><a href="{% url 'prestasi:list' %}">Prestasi</a></li>
                                <li><a href="{% url 'karya:list' %}">Karya</a></li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="col-lg-2 col-md-6 mb-4 mb-lg-0">
                        <div class="footer-widget">
                            <h6 class="footer-title">Akademik</h6>
                            <ul class="footer-links">
                                <li><a href="{% url 'akademik:kurikulum' %}">Kurikulum</a></li>
                                <li><a href="{% url 'akademik:jadwal' %}">Jadwal Kuliah</a></li>
                                <li><a href="{% url 'akademik:dosen_list' %}">Staff Pengajar</a></li>
                                <li><a href="{% url 'akademik:publikasi' %}">Publikasi</a></li>
                                <li><a href="{% url 'main:faq' %}">FAQ</a></li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="col-lg-4 col-md-6">
                        <div class="footer-widget">
                            <h6 class="footer-title">Kontak</h6>
                            <ul class="footer-contact">
                                <li>
                                    <i class="bi bi-geo-alt"></i>
                                    <span>{{ site_settings.address|default:"Jl. A. Yani, Mendungan, Pabelan, Kartasura" }}</span>
                                </li>
                                <li>
                                    <i class="bi bi-telephone"></i>
                                    <span>{{ site_settings.phone|default:"(0271) 717417" }}</span>
                                </li>
                                <li>
                                    <i class="bi bi-envelope"></i>
                                    <span>{{ site_settings.email|default:"pti@ums.ac.id" }}</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-6">
                        <p class="mb-0">
                            &copy; {% now "Y" %} {{ site_settings.site_name|default:"Program Studi Teknik Informatika" }}. All rights reserved.
                        </p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <p class="mb-0">
                            Made with <i class="bi bi-heart-fill text-danger"></i> using Django
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    
    <!-- Modal Pencarian -->
    <div class="modal fade" id="searchModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-body p-4">
                    <form action="{% url 'main:search' %}" method="GET">
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-transparent border-end-0">
                                <i class="bi bi-search"></i>
                            </span>
                            <input type="text" class="form-control border-start-0" name="q" 
                                   id="searchInput" placeholder="Cari berita, prestasi, karya, dosen..." 
                                   autocomplete="off" required minlength="3">
                            <button class="btn btn-primary" type="submit">Cari</button>
                        </div>
                    </form>
                    <div id="searchSuggestions" class="mt-3"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Widget Chatbot -->
    <div id="chatbot-widget">
        <button class="chatbot-toggle" id="chatbotToggle" aria-label="Buka Chatbot">
            <i class="bi bi-chat-dots-fill"></i>
            <span class="chatbot-badge">1</span>
        </button>
        
        <div class="chatbot-container" id="chatbotContainer">
            <div class="chatbot-header">
                <div class="d-flex align-items-center">
                    <div class="chatbot-avatar">
                        <i class="bi bi-robot"></i>
                    </div>
                    <div class="ms-2">
                        <h6 class="mb-0">PTI Assistant</h6>
                        <small class="text-success"><i class="bi bi-circle-fill"></i> Online</small>
                    </div>
                </div>
                <button class="btn btn-sm btn-link text-white" id="chatbotClose">
                    <i class="bi bi-x-lg"></i>
                </button>
            </div>
            
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="chat-message bot">
                    <div class="message-content">
                        Halo! üëã Saya PTI Assistant, siap membantu Anda. Ada yang bisa saya bantu?
                    </div>
                </div>
            </div>
            
            <div class="chatbot-quick-replies" id="quickReplies">
                <button class="quick-reply-btn" data-message="Info pendaftaran">üìù Pendaftaran</button>
                <button class="quick-reply-btn" data-message="Info kurikulum">üìö Kurikulum</button>
                <button class="quick-reply-btn" data-message="Info beasiswa">üéì Beasiswa</button>
                <button class="quick-reply-btn" data-message="Kontak prodi">üìû Kontak</button>
            </div>
            
            <div class="chatbot-input">
                <form id="chatbotForm">
                    <div class="input-group">
                        <input type="text" class="form-control" id="chatInput" 
                               placeholder="Ketik pesan..." autocomplete="off">
                        <button class="btn btn-primary" type="submit">
                            <i class="bi bi-send"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Tombol Kembali ke Atas -->
    <button id="backToTop" class="back-to-top" aria-label="Kembali ke atas">
        <i class="bi bi-arrow-up"></i>
    </button>
    
    <!-- JavaScript Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Animasi AOS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- JavaScript Kustom -->
    <script src="{% static 'js/main.js' %}"></script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>
